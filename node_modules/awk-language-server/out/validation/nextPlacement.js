"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.validateNextPlacement = void 0;
const vscode_languageserver_1 = require("vscode-languageserver");
const utils_1 = require("../utils");
function isRuleWithSpecialPattern(node) {
    var _a;
    return (node.type === 'rule' &&
        ['BEGIN', 'BEGINFILE', 'NEXT', 'NEXTFILE'].includes(((_a = node.firstChild) === null || _a === void 0 ? void 0 : _a.text) || ''));
}
function validateNextPlacement(context) {
    const { node } = context;
    if (node.type === 'next_statement' || node.type === 'nextfile_statement') {
        if (utils_1.findParent(node, isRuleWithSpecialPattern)) {
            return vscode_languageserver_1.Diagnostic.create(utils_1.getRange(node), `${node.type} cannot be used inside of BEGIN/BEGINFILE or END/ENDFILE`, vscode_languageserver_1.DiagnosticSeverity.Error);
        }
    }
    return null;
}
exports.validateNextPlacement = validateNextPlacement;
//# sourceMappingURL=nextPlacement.js.map